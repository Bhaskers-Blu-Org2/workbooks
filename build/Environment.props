<Project>
  <PropertyGroup>
    <TopDirectory>$([MSBuild]::NormalizeDirectory($(MSBuildThisFileDirectory)..))</TopDirectory>
    <ProprietaryDirectory>$([MSBuild]::NormalizeDirectory($(TopDirectory)workbooks-proprietary))</ProprietaryDirectory>
    <BuiltWorkbookAppsBasePath>$([MSBuild]::NormalizeDirectory($(TopDirectory)_build\$(Configuration)\WorkbookApps))</BuiltWorkbookAppsBasePath>
    <ArtifactsBasePath>$([MSBuild]::NormalizeDirectory($(TopDirectory)_artifacts))</ArtifactsBasePath>
  </PropertyGroup>

  <PropertyGroup>
    <Configuration Condition="'$(Configuration)' == ''">Debug</Configuration>
  </PropertyGroup>

  <Import
    Project="$(ProprietaryDirectory)provisionator.targets"
    Condition="Exists('$(ProprietaryDirectory)provisionator.targets')"/>

  <PropertyGroup>
    <IsWindows>false</IsWindows>
    <IsWindows Condition="$([MSBuild]::IsOSPlatform('Windows'))">true</IsWindows>
    <RuntimeIdentifierPlatformBase Condition="$(IsWindows)">win</RuntimeIdentifierPlatformBase>

    <IsMac>false</IsMac>
    <IsMac Condition="$([MSBuild]::IsOSPlatform('OSX'))">true</IsMac>
    <RuntimeIdentifierPlatformBase Condition="$(IsMac)">osx</RuntimeIdentifierPlatformBase>

    <IsLinux>false</IsLinux>
    <IsLinux Condition="$([MSBuild]::IsOSPlatform('Linux'))">true</IsLinux>
    <RuntimeIdentifierPlatformBase Condition="$(IsLinux)">linux</RuntimeIdentifierPlatformBase>

    <IsDotNetCoreMSBuild>false</IsDotNetCoreMSBuild>
    <IsDotNetCoreMSBuild Condition="'$(MSBuildRuntimeType)' == 'Core'">true</IsDotNetCoreMSBuild>
  </PropertyGroup>

  <PropertyGroup>
    <HaveMono Condition="'$(HaveMono)' == ''">false</HaveMono>
    <HaveMono Condition="$(IsMac) And Exists('/Library/Frameworks/Mono.framework/Versions/Current/VERSION')">true</HaveMono>

    <HaveXamarinMac Condition="'$(HaveXamarinMac)' == ''">false</HaveXamarinMac>
    <HaveXamarinMac Condition="$(IsMac) And Exists('/Library/Frameworks/Xamarin.Mac.framework/Versions/Current/Version')">true</HaveXamarinMac>

    <HaveXamarinIos Condition="'$(HaveXamarinIos)' == ''">false</HaveXamarinIos>
    <HaveXamarinIos Condition="$(IsMac) And Exists('/Library/Frameworks/Xamarin.iOS.framework/Versions/Current/Version')">true</HaveXamarinIos>
    <HaveXamarinIos Condition="$(IsWindows) And Exists('$(MSBuildExtensionsPath)\Xamarin\iOS')">true</HaveXamarinIos>

    <HaveXamarinAndroid Condition="'$(HaveXamarinAndroid)' == ''">false</HaveXamarinAndroid>
    <HaveXamarinAndroid Condition="$(IsMac) And Exists('/Library/Frameworks/Xamarin.Android.framework/Versions/Current/Version')">true</HaveXamarinAndroid>
    <HaveXamarinAndroid Condition="$(IsWindows) And Exists('$(MSBuildExtensionsPath)\Xamarin\Android')">true</HaveXamarinAndroid>
  </PropertyGroup>

  <ItemGroup>
    <WhichSearchPath Include="$(TopDirectory)"/>
    <WhichSearchPath Include="$(Provisionator_ArtifactCachePath)"/>
  </ItemGroup>

  <ItemGroup>
    <ConfigurationSummary Include="Host Environment:"/>
    <ConfigurationSummary Include="%20%20Host RID Base: $(RuntimeIdentifierPlatformBase)"/>
    <ConfigurationSummary Include="%20%20.NET Core MSBuild: $(IsDotNetCoreMSBuild)"/>
    <ConfigurationSummary Include="%20%20MSBuildBinPath: $(MSBuildBinPath)"/>
    <ConfigurationSummary Include="%20%20MSBuildExtensionsPath: $(MSBuildExtensionsPath)"/>
    <ConfigurationSummary Include="%20%20Available SDKs/Frameworks:"/>
    <ConfigurationSummary Include="%20%20%20%20Mono: $(HaveMono)"/>
    <ConfigurationSummary Include="%20%20%20%20Xamarin.Mac: $(HaveXamarinMac)"/>
    <ConfigurationSummary Include="%20%20%20%20Xamarin.iOS: $(HaveXamarinIos)"/>
    <ConfigurationSummary Include="%20%20%20%20Xamarin.Android: $(HaveXamarinAndroid)"/>
  </ItemGroup>
</Project>